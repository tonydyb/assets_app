# 1️⃣ 需求规格说明书（Software Requirements Specification, SRS）

版本：1.2  
作者：Tei  
日期：2026-02-15

## 1. 项目目标

- 提供本地运行的个人资产记录系统
- 长期可运行（目标 20 年）
- 数据完全由用户掌控
- 不依赖云服务

## 2. 功能需求

### 2.1 基础资产管理

- 用户可新增、查看、修改、删除资产记录
- 用户可新增、查看、修改、删除资产类型
- 系统可展示总资产与资产趋势图
- 系统支持数据导出（CSV）
- 系统支持数据备份
- 系统支持数据库文件导出（`.db`）
- 系统支持数据库文件导入（`.db`）

### 2.2 多语言需求

- 系统应支持以下界面语言：
  - 简体中文（`zh-CN`）
  - English（`en-US`）
  - 日本語（`ja-JP`）
- 系统默认语言为 English（`en-US`）
- 用户可在界面内找到语言切换入口并随时切换
- 用户的语言选择在重启应用后仍然生效（持久化）
- 当某个文案在当前语言缺失时，系统应按以下顺序回退：
  1. `en-US`
  2. `zh-CN`
  3. 文案键名（用于提示缺失）

### 2.3 多币种需求

- 系统应支持以下币种：
  - `JPY`、`CNY`、`USD`
- 每条资产记录应有“记账币种”字段（资产原始币种）
- 系统应提供“显示币种”设置，用于统一展示总额与统计结果
- 汇率来源应为“用户可确认的本地汇率表”（由用户在设置页维护/确认）
- 系统应显示当前汇率的更新时间
- 当某币种缺失到显示币种的汇率时：
  - 不进行静默换算
  - 明确提示“缺少汇率”
  - 对应金额在汇总中不计入，并显示受影响条目数

## 3. 非功能需求

- 单机本地可运行
- 数据格式长期可读
- 启动简单
- 数据可迁移
- 关键设置在重启后保持一致

## 4. 验收标准（用户可见行为）

### 4.1 多语言验收

1. 首次安装后，界面默认显示 English。  
2. 用户在设置中切换到 English 后，主导航、按钮、表头、提示信息全部显示英文。  
3. 用户关闭并重新打开应用后，仍保持 English。  
4. 当某一条文案在 English 缺失时，界面显示中文或英文回退文案，不出现空白。  
5. 当中英文都缺失时，界面显示该文案键名，便于定位缺失翻译。

### 4.2 多币种验收

1. 用户可在新增/编辑资产时选择币种（`JPY/CNY/USD`）。  
2. 用户可在设置中切换显示币种（例如从 `JPY` 切到 `CNY`）。  
3. 用户可在设置页直接录入并保存汇率，保存后重启应用仍生效。  
4. Dashboard 总额、图表数值会随显示币种切换而变化。  
5. 界面可看到汇率更新时间。  
6. 当某币种缺少换算汇率时，界面明确提示“缺少汇率”，并标明有部分资产未计入汇总。  
7. 在汇率缺失场景下，系统不会把缺失汇率的资产错误计入总额。

### 4.3 设备迁移（导入/导出）验收

1. 用户可在设置页点击“导出数据”，将当前数据库导出为 `.db` 文件到本地指定路径。  
2. 用户可在设置页点击“导入数据”并选择 `.db` 文件，系统在导入前明确提示“将覆盖当前数据”。  
3. 导入成功后，系统自动重启，重启后展示导入后的数据。  
4. 导入非法或损坏数据库文件时，系统给出失败提示且当前数据不被破坏。  
5. 导入前系统自动备份当前数据库，可用于回滚恢复。  
